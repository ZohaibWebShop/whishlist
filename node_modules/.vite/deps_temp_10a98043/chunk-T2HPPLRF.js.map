{
  "version": 3,
  "sources": ["../../@shopify/app-bridge-core/actions/validator.js"],
  "sourcesContent": ["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isPermitted = exports.getPermissionKey = exports.isPerformanceOrWebVitalsAction = exports.isAppMessage = exports.isAppBridgeAction = void 0;\nvar types_1 = require(\"../client/types\");\nvar constants_1 = require(\"./constants\");\nvar helper_1 = require(\"./helper\");\n/**\n * Predicate to determine if an action is an App Bridge action.\n * @public\n */\nfunction isAppBridgeAction(action) {\n    return (action instanceof Object &&\n        Object.prototype.hasOwnProperty.call(action, 'type') &&\n        action.type.toString().startsWith(constants_1.PREFIX));\n}\nexports.isAppBridgeAction = isAppBridgeAction;\n/**\n * Predicate to determine if an event originated from an application.\n * @internal\n */\nfunction isAppMessage(event) {\n    if (typeof event !== 'object' || !event.data || typeof event.data !== 'object') {\n        return false;\n    }\n    var data = event.data;\n    return (Object.prototype.hasOwnProperty.call(data, 'type') &&\n        helper_1.findMatchInEnum(types_1.MessageType, data.type) !== undefined);\n}\nexports.isAppMessage = isAppMessage;\n/**\n * Function used to determine if an action is in the Performance or WebVitals groups\n * @public\n */\nfunction isPerformanceOrWebVitalsAction(_a) {\n    var type = _a.type;\n    return type.match(/^APP::(PERFORMANCE|WEB_VITALS)::/);\n}\nexports.isPerformanceOrWebVitalsAction = isPerformanceOrWebVitalsAction;\n/**\n * Returns the action type without the prefix and group\n * @internal\n */\nfunction getPermissionKey(type) {\n    return type.replace(new RegExp(\"^\" + constants_1.PREFIX + constants_1.SEPARATOR + \"\\\\w+\" + constants_1.SEPARATOR), '');\n}\nexports.getPermissionKey = getPermissionKey;\n/**\n * Predicate to determine if an action is permitted\n * @internal\n */\nfunction isPermitted(features, _a, permissionType) {\n    var group = _a.group, type = _a.type;\n    if (!group || !Object.prototype.hasOwnProperty.call(features, group)) {\n        return false;\n    }\n    var feature = features[group];\n    if (!feature) {\n        return false;\n    }\n    var actionType = getPermissionKey(type);\n    return feature[actionType] ? feature[actionType][permissionType] === true : false;\n}\nexports.isPermitted = isPermitted;\n"],
  "mappings": ";;;;;;;;;;;;AAAA;AAAA;AAAA;AACA,WAAO,eAAe,SAAS,cAAc,EAAE,OAAO,KAAK,CAAC;AAC5D,YAAQ,cAAc,QAAQ,mBAAmB,QAAQ,iCAAiC,QAAQ,eAAe,QAAQ,oBAAoB;AAC7I,QAAI,UAAU;AACd,QAAI,cAAc;AAClB,QAAI,WAAW;AAKf,aAAS,kBAAkB,QAAQ;AAC/B,aAAQ,kBAAkB,UACtB,OAAO,UAAU,eAAe,KAAK,QAAQ,MAAM,KACnD,OAAO,KAAK,SAAS,EAAE,WAAW,YAAY,MAAM;AAAA,IAC5D;AACA,YAAQ,oBAAoB;AAK5B,aAAS,aAAa,OAAO;AACzB,UAAI,OAAO,UAAU,YAAY,CAAC,MAAM,QAAQ,OAAO,MAAM,SAAS,UAAU;AAC5E,eAAO;AAAA,MACX;AACA,UAAI,OAAO,MAAM;AACjB,aAAQ,OAAO,UAAU,eAAe,KAAK,MAAM,MAAM,KACrD,SAAS,gBAAgB,QAAQ,aAAa,KAAK,IAAI,MAAM;AAAA,IACrE;AACA,YAAQ,eAAe;AAKvB,aAAS,+BAA+B,IAAI;AACxC,UAAI,OAAO,GAAG;AACd,aAAO,KAAK,MAAM,kCAAkC;AAAA,IACxD;AACA,YAAQ,iCAAiC;AAKzC,aAAS,iBAAiB,MAAM;AAC5B,aAAO,KAAK,QAAQ,IAAI,OAAO,MAAM,YAAY,SAAS,YAAY,YAAY,SAAS,YAAY,SAAS,GAAG,EAAE;AAAA,IACzH;AACA,YAAQ,mBAAmB;AAK3B,aAAS,YAAY,UAAU,IAAI,gBAAgB;AAC/C,UAAI,QAAQ,GAAG,OAAO,OAAO,GAAG;AAChC,UAAI,CAAC,SAAS,CAAC,OAAO,UAAU,eAAe,KAAK,UAAU,KAAK,GAAG;AAClE,eAAO;AAAA,MACX;AACA,UAAI,UAAU,SAAS,KAAK;AAC5B,UAAI,CAAC,SAAS;AACV,eAAO;AAAA,MACX;AACA,UAAI,aAAa,iBAAiB,IAAI;AACtC,aAAO,QAAQ,UAAU,IAAI,QAAQ,UAAU,EAAE,cAAc,MAAM,OAAO;AAAA,IAChF;AACA,YAAQ,cAAc;AAAA;AAAA;",
  "names": []
}

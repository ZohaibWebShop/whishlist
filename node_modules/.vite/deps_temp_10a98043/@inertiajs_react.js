import {
  Oe,
  Q,
  Z,
  ee,
  k
} from "./chunk-LPXSPIIF.js";
import "./chunk-OHN4UL6D.js";
import {
  require_lodash
} from "./chunk-TWDEUQP3.js";
import {
  require_react
} from "./chunk-ZVMIEU5R.js";
import "./chunk-ZVL7GZ5E.js";
import "./chunk-JIUY4ZC5.js";
import {
  __toESM
} from "./chunk-UXIASGQL.js";

// node_modules/@inertiajs/react/dist/index.esm.js
var import_react = __toESM(require_react());
var import_react2 = __toESM(require_react());
var import_react3 = __toESM(require_react());
var import_react4 = __toESM(require_react());
var import_react5 = __toESM(require_react());
var import_react6 = __toESM(require_react());
var import_lodash = __toESM(require_lodash());
var import_react7 = __toESM(require_react());
var import_react8 = __toESM(require_react());
var import_react9 = __toESM(require_react());
var B = (0, import_react3.createContext)(void 0);
B.displayName = "InertiaHeadContext";
var A = B;
var N = (0, import_react4.createContext)(void 0);
N.displayName = "InertiaPageContext";
var E = N;
function M({ children: l, initialPage: c, initialComponent: s, resolveComponent: p, titleCallback: a, onHeadUpdate: S }) {
  let [d, P] = (0, import_react2.useState)({ component: s || null, page: c, key: null }), u = (0, import_react2.useMemo)(() => Q(typeof window > "u", a || ((f) => f), S || (() => {
  })), []);
  if ((0, import_react2.useEffect)(() => {
    Oe.init({ initialPage: c, resolveComponent: p, swapComponent: async ({ component: f, page: e, preserveState: i }) => {
      P((r) => ({ component: f, page: e, key: i ? r.key : Date.now() }));
    } }), Oe.on("navigate", () => u.forceUpdate());
  }, []), !d.component)
    return (0, import_react2.createElement)(A.Provider, { value: u }, (0, import_react2.createElement)(E.Provider, { value: d.page }, null));
  let g = l || (({ Component: f, props: e, key: i }) => {
    let r = (0, import_react2.createElement)(f, { key: i, ...e });
    return typeof f.layout == "function" ? f.layout(r) : Array.isArray(f.layout) ? f.layout.concat(r).reverse().reduce((y, T) => (0, import_react2.createElement)(T, { children: y, ...e })) : r;
  });
  return (0, import_react2.createElement)(A.Provider, { value: u }, (0, import_react2.createElement)(E.Provider, { value: d.page }, g({ Component: d.component, key: d.key, props: d.page.props })));
}
M.displayName = "Inertia";
async function j({ id: l = "app", resolve: c, setup: s, title: p, progress: a = {}, page: S, render: d }) {
  let P = typeof window > "u", u = P ? null : document.getElementById(l), g = S || JSON.parse(u.dataset.page), f = (r) => Promise.resolve(c(r)).then((y) => y.default || y), e = [], i = await f(g.component).then((r) => s({ el: u, App: M, props: { initialPage: g, initialComponent: r, resolveComponent: f, titleCallback: p, onHeadUpdate: P ? (y) => e = y : null } }));
  if (!P && a && Z(a), P) {
    let r = await d((0, import_react.createElement)("div", { id: l, "data-page": JSON.stringify(g) }, i));
    return { head: e, body: r };
  }
}
var ne = function({ children: l, title: c }) {
  let s = (0, import_react5.useContext)(A), p = (0, import_react5.useMemo)(() => s.createProvider(), [s]);
  (0, import_react5.useEffect)(() => () => {
    p.disconnect();
  }, [p]);
  function a(e) {
    return ["area", "base", "br", "col", "embed", "hr", "img", "input", "keygen", "link", "meta", "param", "source", "track", "wbr"].indexOf(e.type) > -1;
  }
  function S(e) {
    let i = Object.keys(e.props).reduce((r, y) => {
      if (["head-key", "children", "dangerouslySetInnerHTML"].includes(y))
        return r;
      let T = e.props[y];
      return T === "" ? r + ` ${y}` : r + ` ${y}="${T}"`;
    }, "");
    return `<${e.type}${i}>`;
  }
  function d(e) {
    return typeof e.props.children == "string" ? e.props.children : e.props.children.reduce((i, r) => i + P(r), "");
  }
  function P(e) {
    let i = S(e);
    return e.props.children && (i += d(e)), e.props.dangerouslySetInnerHTML && (i += e.props.dangerouslySetInnerHTML.__html), a(e) || (i += `</${e.type}>`), i;
  }
  function u(e) {
    return import_react5.default.cloneElement(e, { inertia: e.props["head-key"] !== void 0 ? e.props["head-key"] : "" });
  }
  function g(e) {
    return P(u(e));
  }
  function f(e) {
    let i = import_react5.default.Children.toArray(e).filter((r) => r).map((r) => g(r));
    return c && !i.find((r) => r.startsWith("<title")) && i.push(`<title inertia>${c}</title>`), i;
  }
  return p.update(f(l)), null;
};
var ae = ne;
var F = () => {
};
var V = (0, import_react6.forwardRef)(({ children: l, as: c = "a", data: s = {}, href: p, method: a = "get", preserveScroll: S = false, preserveState: d = null, replace: P = false, only: u = [], headers: g = {}, queryStringArrayFormat: f = "brackets", onClick: e = F, onCancelToken: i = F, onBefore: r = F, onStart: y = F, onProgress: T = F, onFinish: H = F, onCancel: h = F, onSuccess: L = F, onError: x = F, ...w }, R) => {
  let I = (0, import_react6.useCallback)((o) => {
    e(o), ee(o) && (o.preventDefault(), Oe.visit(p, { data: s, method: a, preserveScroll: S, preserveState: d ?? a !== "get", replace: P, only: u, headers: g, onCancelToken: i, onBefore: r, onStart: y, onProgress: T, onFinish: H, onCancel: h, onSuccess: L, onError: x }));
  }, [s, p, a, S, d, P, u, g, e, i, r, y, T, H, h, L, x]);
  c = c.toLowerCase(), a = a.toLowerCase();
  let [v, t] = k(a, p || "", s, f);
  return p = v, s = t, c === "a" && a !== "get" && console.warn(`Creating POST/PUT/PATCH/DELETE <a> links is discouraged as it causes "Open Link in New Tab/Window" accessibility issues.

Please specify a more appropriate element using the "as" attribute. For example:

<Link href="${p}" method="${a}" as="button">...</Link>`), (0, import_react6.createElement)(c, { ...w, ...c === "a" ? { href: p } : {}, ref: R, onClick: I }, l);
});
V.displayName = "InertiaLink";
var de = V;
function D(l, c) {
  let [s, p] = (0, import_react8.useState)(() => {
    let a = Oe.restore(c);
    return a !== void 0 ? a : l;
  });
  return (0, import_react8.useEffect)(() => {
    Oe.remember(s, c);
  }, [s, c]), [s, p];
}
function W(l, c) {
  let s = (0, import_react7.useRef)(null), p = typeof l == "string" ? l : null, [a, S] = (0, import_react7.useState)((typeof l == "string" ? c : l) || {}), d = (0, import_react7.useRef)(null), P = (0, import_react7.useRef)(null), [u, g] = p ? D(a, `${p}:data`) : (0, import_react7.useState)(a), [f, e] = p ? D({}, `${p}:errors`) : (0, import_react7.useState)({}), [i, r] = (0, import_react7.useState)(false), [y, T] = (0, import_react7.useState)(false), [H, h] = (0, import_react7.useState)(null), [L, x] = (0, import_react7.useState)(false), [w, R] = (0, import_react7.useState)(false), I = (t) => t;
  (0, import_react7.useEffect)(() => (s.current = true, () => {
    s.current = false;
  }), []);
  let v = (0, import_react7.useCallback)((t, o, n = {}) => {
    let C = { ...n, onCancelToken: (m) => {
      if (d.current = m, n.onCancelToken)
        return n.onCancelToken(m);
    }, onBefore: (m) => {
      if (x(false), R(false), clearTimeout(P.current), n.onBefore)
        return n.onBefore(m);
    }, onStart: (m) => {
      if (T(true), n.onStart)
        return n.onStart(m);
    }, onProgress: (m) => {
      if (h(m), n.onProgress)
        return n.onProgress(m);
    }, onSuccess: (m) => {
      if (s.current && (T(false), h(null), e({}), r(false), x(true), R(true), P.current = setTimeout(() => {
        s.current && R(false);
      }, 2e3)), n.onSuccess)
        return n.onSuccess(m);
    }, onError: (m) => {
      if (s.current && (T(false), h(null), e(m), r(true)), n.onError)
        return n.onError(m);
    }, onCancel: () => {
      if (s.current && (T(false), h(null)), n.onCancel)
        return n.onCancel();
    }, onFinish: () => {
      if (s.current && (T(false), h(null)), d.current = null, n.onFinish)
        return n.onFinish();
    } };
    t === "delete" ? Oe.delete(o, { ...C, data: I(u) }) : Oe[t](o, I(u), C);
  }, [u, e]);
  return { data: u, setData(t, o) {
    g(typeof t == "string" ? { ...u, [t]: o } : typeof t == "function" ? (n) => t(n) : t);
  }, isDirty: !(0, import_lodash.default)(u, a), errors: f, hasErrors: i, processing: y, progress: H, wasSuccessful: L, recentlySuccessful: w, transform(t) {
    I = t;
  }, setDefaults(t, o) {
    S(typeof t > "u" ? () => u : (n) => ({ ...n, ...typeof t == "string" ? { [t]: o } : t }));
  }, reset(...t) {
    t.length === 0 ? g(a) : g(Object.keys(a).filter((o) => t.includes(o)).reduce((o, n) => (o[n] = a[n], o), { ...u }));
  }, setError(t, o) {
    e((n) => {
      let C = { ...n, ...typeof t == "string" ? { [t]: o } : t };
      return r(Object.keys(C).length > 0), C;
    });
  }, clearErrors(...t) {
    e((o) => {
      let n = Object.keys(o).reduce((C, m) => ({ ...C, ...t.length > 0 && !t.includes(m) ? { [m]: o[m] } : {} }), {});
      return r(Object.keys(n).length > 0), n;
    });
  }, submit: v, get(t, o) {
    v("get", t, o);
  }, post(t, o) {
    v("post", t, o);
  }, put(t, o) {
    v("put", t, o);
  }, patch(t, o) {
    v("patch", t, o);
  }, delete(t, o) {
    v("delete", t, o);
  }, cancel() {
    d.current && d.current.cancel();
  } };
}
function q() {
  let l = (0, import_react9.useContext)(E);
  if (!l)
    throw new Error("usePage must be used within the Inertia component");
  return l;
}
var yt = Oe;
export {
  ae as Head,
  de as Link,
  j as createInertiaApp,
  yt as router,
  W as useForm,
  q as usePage,
  D as useRemember
};
//# sourceMappingURL=@inertiajs_react.js.map
